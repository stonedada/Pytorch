import pandas as pd
import matplotlib.pyplot as plt
import numpy as np
plt.rcParams['font.sans-serif'] = 'Microsoft YaHei'

Unet = [
   [
0.777102232,
0.830473363,
0.917676091,
0.872301102,
0.838792205,
0.870975018,
0.901993811,
0.768355489,
0.926005244,
0.914922774

    ],
    [
0.594993515,
0.667379028,
0.835066184,
0.760731923,
0.702569447,
0.552439929,
0.769196609,
0.588381563,
0.850126942,
0.802387898

    ],
    [0.6199984155601039,
0.7836602640651835,
0.8643106090803868,
0.8535214764784951,
0.8664859386440436,
0.4686884580194849,
0.599732084718939,
0.6880953604501927,
0.9233025536427937,
0.822351405257322],


    [
0.274746865,
0.253033251,
0.219071299,
0.233892113,
0.272916615,
0.281680346,
0.272249043,
0.392139077,
0.189445183,
0.194158599,

    ],


   ]


TransUnet = [
[0.740420282,
0.833197355,
0.917765021,
0.872058332,
0.854487062,
0.869691491,
0.903489232,
0.761975706,
0.916983306,
0.902202368
],
[0.545105976,
0.685829929,
0.841366103,
0.738974532,
0.690652219,
0.680296383,
0.802074087,
0.55649765,
0.834688711,
0.803172994,
],
[0.7128331084832696,
0.8282605274965137,
0.9204779221028323,
0.8084464396021727,
0.8351657391411794,
0.8083139965476361,
0.8906821089198556,
0.662378554033795,
0.9160756692894721,
0.8098692972867472],
[0.255070686,
0.226207674,
0.194181681,
0.241580293,
0.271449566,
0.184282258,
0.172773853,
0.396050185,
0.184074685,
0.199067622
]
]

ConvCaps=[

[0.742771626,
0.832552195,
0.920413911,
0.85188669,
0.875694692,
0.87997508,
0.900534034,
0.823991597,
0.916461885,
0.900827825
],
    [0.509449617,
0.691424256,
0.84586604,
0.724054005,
0.738513355,
0.433854111,
0.809482644,
0.672966514,
0.839071705,
0.752255608
],
    [0.42529210478935353,
0.7777629427364384,
0.8705546432677965,
0.7810762057570895,
0.868567933719322,
0.43477200185496406,
0.8684228010672956,
0.7179076871289506,
0.9050541922272559,
0.6425165162726791],
[0.36550197,
0.256384611,
0.230318516,
0.29242608,
0.288114965,
0.307316571,
0.194539011,
0.377967626,
0.207203299,
0.259277344
],

]

CapUnet=[
[0.7425909638404846,
0.8450772166252136,
0.9240906834602356,
0.8705337643623352,
0.8834548592567444,
0.8932672142982483,
0.9072436690330505,
0.8394168019294739,
0.9143142700195312,
0.9126189947128296,
 ],
[0.5347640218407821,
0.7069804956457684,
0.8530586054512669,
0.7571412642891256,
0.7787279173033845,
0.6522750208425683,
0.8228502593983472,
0.6744080828326433,
0.8335418254075553,
 ],
[0.7530971058916871,
0.8204125826422883,
0.9109076558356018,
0.6736450266629629,
0.854046120211769,
0.8634179341362292,
0.8986236488863105,
0.6771018907357185,
0.9329821099203224,
0.8779852988112791],
    [
0.27769050002098083,
0.22035257518291473,
0.1917968988418579,
0.2374546378850937,
0.25257325172424316,
0.2026287317276001,
0.17143484950065613,
0.35266315937042236,
0.1846870332956314,
0.1978393495082855,
     ],
]

UCaps=[
[0.776717782,
0.812715888,
0.911531329,
0.861755252,
0.867205083,
0.880285144,
0.90508765,
0.781913102,
0.917810023,
0.905863941,
],
    [0.584996796,
0.655299952,
0.734965411,
0.690004401,
0.642436518,
0.730724584,
0.783523362,
0.538946552,
0.75515651,
0.804968206,
],
[0.5658286087596665,
0.7752251226007111,
0.7953699477024223,
0.7748535595445826,
0.8128157149967019,
0.6533823306557155,
0.8719036783685518,
0.6480542811245826,
0.8329058925678857,
0.7255861965570476],
[0.315389097,
0.273469061,
0.308073282,
0.321776539,
0.33390379,
0.234496191,
0.205088779,
0.436797798,
0.282134145,
0.248568088,
]

]



x1 = np.array([1,9,17,25])
x2 = x1+1.1
x3 = x2+1.1
x4 = x3+1.1
x5 = x4+1.1


plt.figure(figsize=(12, 6))

box1 = plt.boxplot(Unet,positions=x1,patch_artist=True,showmeans=True,
            boxprops={"facecolor": "C0",
                      "edgecolor": "grey",
                      "linewidth": 0.5},
            medianprops={"color": "k", "linewidth": 0.0},
            meanprops={'marker':'+',
                       'markerfacecolor':'k',
                       'markeredgecolor':'k',
                       'markersize':5})
box2 = plt.boxplot(TransUnet,positions=x2,patch_artist=True,showmeans=True,medianprops=None,
            boxprops={"facecolor": "C1",
                      "edgecolor": "grey",
                      "linewidth": 0.5},

            meanprops={'marker':'+',
                       'markerfacecolor':'k',
                       'markeredgecolor':'k',
                       'markersize':5})
box3 = plt.boxplot(ConvCaps,positions=x3,patch_artist=True,showmeans=True,
            boxprops={"facecolor": "C2",
                      "edgecolor": "grey",
                      "linewidth": 0.5},
            medianprops={"color": "k", "linewidth": 0.0},
            meanprops={'marker':'+',
                       'markerfacecolor':'k',
                       'markeredgecolor':'k',
                       'markersize':5})
box4 = plt.boxplot(CapUnet,positions=x4,patch_artist=True,showmeans=True,
            boxprops={"facecolor": "C3",
                      "edgecolor": "grey",
                      "linewidth": 0.5},
            medianprops={"color": "k", "linewidth": 0.0},
            meanprops={'marker':'+',
                       'markerfacecolor':'k',
                       'markeredgecolor':'k',
                       'markersize':5})
box5 = plt.boxplot(UCaps,positions=x5,patch_artist=True,showmeans=True,
            boxprops={"facecolor": "C4",
                      "edgecolor": "grey",
                      "linewidth": 0.5},
            medianprops={"color": "k", "linewidth": 0.0},
            meanprops={'marker':'+',
                       'markerfacecolor':'k',
                       'markeredgecolor':'k',
                       'markersize':5})

metric = ["PCC ↑","R2Score ↑","SSIM ↑","MAE ↓"]
plt.xticks([3,11,18.5,27],metric,fontsize=14)
plt.xlim(0,35)
plt.ylim(0,1)
plt.ylabel('Accuracy',fontsize=14)
plt.grid(axis='y',ls='--',alpha=0.8)

# 给箱体添加图例，每类箱线图中取第一个颜色块用于代表图例
plt.legend(handles=[box1['boxes'][0],box2['boxes'][0],box3['boxes'][0],box4['boxes'][0],box5['boxes'][0]],
           labels=["3DUnet","TransUnet","ConvCaps","Our 3DCapUnet","3D-UCaps"],fontsize = 16)

plt.tight_layout()



plt.show()
plt.savefig("1.jpg")